<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS, and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>
<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>ASP.NET Web API is a framework that makes it easy to build HTTP services that reach
        a broad range of clients, including browsers and mobile devices. ASP.NET Web API
        is an ideal platform for building RESTful applications on the .NET Framework.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301870">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301871">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301872">Learn more &raquo;</a></p>
    </div>
</div>

<div class="row">
	<div class="col-sm-12">
		<button id="facebook-login">Facebook login</button>
	</div>
</div>

@*<script src="https://code.jquery.com/jquery-3.2.1.min.js"
				integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
				crossorigin="anonymous"></script>

<script>
	var baseUrl = '/';
	// function that runs when the site starts up.
	function startup() {
		console.log('startup');
		// if authorized, fetch secret resource
		var authorized = false;

		if (authorized) {

		} else {
			getExternalLoginUrl(function (fbLoginUrl) {
				authenticateWithFacebook(fbLoginUrl);
			});
		}
	}

	// Authenticate with Facebook
	function authenticateWithFacebook(fbLoginUrl) {
		console.log('authenticateWithFacebook');

		//window.location.href = fbLoginUrl;

		var newwindow;
		function createPop(url, name) {
			newwindow = window.open(url, name, 'width=560,height=340,toolbar=0,menubar=0,location=0');
			if (window.focus) { newwindow.focus() }
		}

		createPop(fbLoginUrl, 'test');
	}

	// Helper method for fetching the registered login provider options from the API.
	// Every login option will come with a URL matching an endpoint on the backend which must be called
	// to retrieve the login screen for the federated login.
	function getExternalLoginUrl(callback) {
		console.log('getExternalLoginUrl');
		// Return URL for an HTML app is just a local page. This page does NOT need to exist in the app.
		var returnUrl = 'http:%2F%2Flocalhost%2Fcallback'; //'http:%2F%2Flocalhost:52146%2Fcallback';

		$.ajax({
			url: '/api/Account/ExternalLogins?returnUrl=' + returnUrl + '&generateState=true',
			type: 'GET',
			success: function (response) {
				console.log('getExternalLoginUrl - response', response);

				if (callback) {
					// get the facebook url. Facebook is the first of the returned external login providers
					var fbLoginUrl = response[0].Url;
					callback(fbLoginUrl);
				}
			}
		});
	}
	
	// Log a user in to the backend.
	function login() {

	}

	// Function that signs up a user with facebook
	function signup() {

	}

	// Gets a resource from the backend api that requires that you are authorized
	function getAuthorizedResource() {

	}

	// Gets the facebook users data. To be used when creating a backend user.
	function getFacebookUserData() {

	}

	$(document).ready(function () {
		$('#facebook-login').click(startup);
	});

</script>*@



<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1300780379983492',
      xfbml      : true,
      version    : 'v2.9'
    });
    FB.AppEvents.logPageView();

    FB.getLoginStatus(function (response) {
    	console.log(response);
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));


  
</script>